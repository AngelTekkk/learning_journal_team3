<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${editMode ? 'Profil bearbeiten' : 'Registrierung'}">Registrierung</title>
</head>
<body>
<h1 th:text="${editMode ? 'Profil bearbeiten' : 'Registrierung'}">Registrierung</h1>


<div sec:authorize="hasRole('ADMIN')">
    <div class="alert alert-info">
        <strong>Admin-Hinweis:</strong> Als Administrator können Sie neue Benutzer erstellen oder bestehende bearbeiten.
    </div>
</div>

<div sec:authorize="hasRole('USER')">
    <div class="alert alert-info">
        <strong>Benutzer-Hinweis:</strong> Sie können Ihr Profil bearbeiten.
    </div>
</div>

<div sec:authorize="isAnonymous()">
    <div class="alert alert-info">
        <strong>Registrieren Sie sich:</strong> Bitte geben Sie Ihre Daten ein, um sich zu registrieren.
    </div>
</div>

<form th:action="@{/registration}" method="post">
    <label class="form-label">First Name :</label><br/>
    <input class="form-control" th:value="${user.role == 'USER' ? user.firstName : ''}"
           type="text" name="firstName" pattern="[A-Za-zÄÖÜäöüß\s-]{2,50}"
           title="Bitte nur Buchstaben (min. 2, max. 50 Zeichen)" required/><br/>

    <label class="form-label">Last Name :</label><br/>
    <input class="form-control" th:value="${user.role == 'USER' ? user.lastName : ''}" type="text" name="lastName" pattern="[A-Za-zÄÖÜäöüß\s-]{2,50}"
               title="Bitte nur Buchstaben (min. 2, max. 50 Zeichen)" required/><br/>

    <label class="form-label">E-Mail :</label><br/>
    <input class="form-control" th:value="${user.role == 'USER' ? user.email : ''}" type="email" name="email" required/><br/>

    <label class="form-label">Password :</label><br/>
    <input class="form-control" type="password" name="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).{8,50}"
               title="Bitte mindestens 8 Zeichen, ein Kleinbuchstabe, ein Großbuchstabe und eine Zahl enthalten" required/><br/>

    <div sec:authorize="hasRole('ADMIN')">
        <div class="form-check">
            <input type="radio" id="user" name="role" value="USER" class="form-check-input" checked>
            <label for="user" class="form-check-label">Student</label>
        </div>
        <div class="form-check">
            <input type="radio" id="admin" name="role" value="ADMIN" class="form-check-input">
            <label for="admin" class="form-check-label">Admin</label>
        </div>
    </div>

    <div sec:authorize="!hasRole('ADMIN')">
        <input type="hidden" name="role" th:value="${isUsers ? USER : ADMIN}">
    </div>

    <div sec:authorize="!hasRole('ADMIN')">
        <input type="hidden" name="role" value="USER">
    </div>

    <button type="submit" th:text="${editMode ? 'Speichern' : 'Registrieren'}">Submit</button>

</form>
</body>
</html>